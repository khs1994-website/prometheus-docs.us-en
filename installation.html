
<!DOCTYPE HTML>
<html lang="us-en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Installation · prometheus 英文文档</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-prism/prism-solarizedlight.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="management_api.html" />
    
    
    <link rel="prev" href="http_sd.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://docs.khs1994.com" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Command Line
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="command-line/">
            
                <a href="command-line/">
            
                    
                    Command Line
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="command-line/prometheus.html">
            
                <a href="command-line/prometheus.html">
            
                    
                    Prometheus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="command-line/promtool.html">
            
                <a href="command-line/promtool.html">
            
                    
                    Promtool
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Configuration
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="configuration/alerting_rules.html">
            
                <a href="configuration/alerting_rules.html">
            
                    
                    Alerting Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="configuration/">
            
                <a href="configuration/">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="configuration/https.html">
            
                <a href="configuration/https.html">
            
                    
                    HTTPS And Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="configuration/promtool.html">
            
                <a href="configuration/promtool.html">
            
                    
                    HTTP Configuration For Promtool
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="configuration/recording_rules.html">
            
                <a href="configuration/recording_rules.html">
            
                    
                    Defining Recording Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="configuration/template_examples.html">
            
                <a href="configuration/template_examples.html">
            
                    
                    Template Examples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="configuration/template_reference.html">
            
                <a href="configuration/template_reference.html">
            
                    
                    Template Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="configuration/unit_testing_rules.html">
            
                <a href="configuration/unit_testing_rules.html">
            
                    
                    Unit Testing For Rules
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Querying
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="querying/api.html">
            
                <a href="querying/api.html">
            
                    
                    HTTP API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="querying/basics.html">
            
                <a href="querying/basics.html">
            
                    
                    Querying Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="querying/examples.html">
            
                <a href="querying/examples.html">
            
                    
                    Query Examples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="querying/functions.html">
            
                <a href="querying/functions.html">
            
                    
                    Query Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="querying/">
            
                <a href="querying/">
            
                    
                    Querying
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="querying/operators.html">
            
                <a href="querying/operators.html">
            
                    
                    Operators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="querying/remote_read_api.html">
            
                <a href="querying/remote_read_api.html">
            
                    
                    Remote Read API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="feature_flags.html">
            
                <a href="feature_flags.html">
            
                    
                    Feature Flags
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="federation.html">
            
                <a href="federation.html">
            
                    
                    Federation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="getting_started.html">
            
                <a href="getting_started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="http_sd.html">
            
                <a href="http_sd.html">
            
                    
                    Writing HTTP Service Discovery
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9" data-path="installation.html">
            
                <a href="installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="management_api.html">
            
                <a href="management_api.html">
            
                    
                    Management API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="migration.html">
            
                <a href="migration.html">
            
                    
                    Prometheus 3.0 migration guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="stability.html">
            
                <a href="stability.html">
            
                    
                    API Stability Guarantees
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="storage.html">
            
                <a href="storage.html">
            
                    
                    Storage
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Installation</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="using-pre-compiled-binaries">Using pre-compiled binaries</h2>
<p>We provide precompiled binaries for most official Prometheus components. Check
out the <a href="https://prometheus.io/download" target="_blank">download section</a> for a list of all
available versions.</p>
<h2 id="from-source">From source</h2>
<p>For building Prometheus components from source, see the <code>Makefile</code> targets in
the respective repository.</p>
<h2 id="using-docker">Using Docker</h2>
<p>All Prometheus services are available as Docker images on
<a href="https://quay.io/repository/prometheus/prometheus" target="_blank">Quay.io</a> or
<a href="https://hub.docker.com/r/prom/prometheus/" target="_blank">Docker Hub</a>.</p>
<p>Running Prometheus on Docker is as simple as <code>docker run -p 9090:9090
prom/prometheus</code>. This starts Prometheus with a sample
configuration and exposes it on port 9090.</p>
<p>The Prometheus image uses a volume to store the actual metrics. For
production deployments it is highly recommended to use a
<a href="https://docs.docker.com/storage/volumes/" target="_blank">named volume</a>
to ease managing the data on Prometheus upgrades.</p>
<h3 id="setting-command-line-parameters">Setting command line parameters</h3>
<p>The Docker image is started with a number of default command line parameters, which
can be found in the <a href="https://github.com/prometheus/prometheus/blob/main/Dockerfile" target="_blank">Dockerfile</a> (adjust the link to correspond with the version in use).</p>
<p>If you want to add extra command line parameters to the <code>docker run</code> command,
you will need to re-add these yourself as they will be overwritten.</p>
<h3 id="volumes--bind-mount">Volumes &amp; bind-mount</h3>
<p>To provide your own configuration, there are several options. Here are
two examples.</p>
<p>Bind-mount your <code>prometheus.yml</code> from the host by running:</p>
<pre class="language-"><code class="lang-bash">docker run <span class="token punctuation">\</span>
    -p <span class="token number">9090</span>:9090 <span class="token punctuation">\</span>
    -v /path/to/prometheus.yml:/etc/prometheus/prometheus.yml <span class="token punctuation">\</span>
    prom/prometheus
</code></pre>
<p>Or bind-mount the directory containing <code>prometheus.yml</code> onto
<code>/etc/prometheus</code> by running:</p>
<pre class="language-"><code class="lang-bash">docker run <span class="token punctuation">\</span>
    -p <span class="token number">9090</span>:9090 <span class="token punctuation">\</span>
    -v /path/to/config:/etc/prometheus <span class="token punctuation">\</span>
    prom/prometheus
</code></pre>
<h3 id="save-your-prometheus-data">Save your Prometheus data</h3>
<p>Prometheus data is stored in <code>/prometheus</code> dir inside the container, so the data is cleared every time the container gets restarted. To save your data, you need to set up persistent storage (or bind mounts) for your container.</p>
<p>Run Prometheus container with persistent storage:</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># Create persistent volume for your data</span>
docker volume create prometheus-data
<span class="token comment"># Start Prometheus container</span>
docker run <span class="token punctuation">\</span>
    -p <span class="token number">9090</span>:9090 <span class="token punctuation">\</span>
    -v /path/to/prometheus.yml:/etc/prometheus/prometheus.yml <span class="token punctuation">\</span>
    -v prometheus-data:/prometheus <span class="token punctuation">\</span>
    prom/prometheus
</code></pre>
<h3 id="custom-image">Custom image</h3>
<p>To avoid managing a file on the host and bind-mount it, the
configuration can be baked into the image. This works well if the
configuration itself is rather static and the same across all
environments.</p>
<p>For this, create a new directory with a Prometheus configuration and a
<code>Dockerfile</code> like this:</p>
<pre class="language-"><code class="lang-Dockerfile">FROM prom/prometheus
ADD prometheus.yml /etc/prometheus/
</code></pre>
<p>Now build and run it:</p>
<pre class="language-"><code class="lang-bash">docker build -t my-prometheus <span class="token builtin class-name">.</span>
docker run -p <span class="token number">9090</span>:9090 my-prometheus
</code></pre>
<p>A more advanced option is to render the configuration dynamically on start
with some tooling or even have a daemon update it periodically.</p>
<h2 id="using-configuration-management-systems">Using configuration management systems</h2>
<p>If you prefer using configuration management systems you might be interested in
the following third-party contributions:</p>
<h3 id="ansible">Ansible</h3>
<ul>
<li><a href="https://github.com/prometheus-community/ansible" target="_blank">prometheus-community/ansible</a></li>
</ul>
<h3 id="chef">Chef</h3>
<ul>
<li><a href="https://github.com/rayrod2030/chef-prometheus" target="_blank">rayrod2030/chef-prometheus</a></li>
</ul>
<h3 id="puppet">Puppet</h3>
<ul>
<li><a href="https://forge.puppet.com/puppet/prometheus" target="_blank">puppet/prometheus</a></li>
</ul>
<h3 id="saltstack">SaltStack</h3>
<ul>
<li><a href="https://github.com/saltstack-formulas/prometheus-formula" target="_blank">saltstack-formulas/prometheus-formula</a></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="http_sd.html" class="navigation navigation-prev " aria-label="Previous page: Writing HTTP Service Discovery">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="management_api.html" class="navigation navigation-next " aria-label="Next page: Management API">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Installation","sort_rank":2,"level":"1.9","depth":1,"next":{"title":"Management API","level":"1.10","depth":1,"path":"management_api.md","ref":"management_api.md","articles":[]},"previous":{"title":"Writing HTTP Service Discovery","level":"1.8","depth":1,"path":"http_sd.md","ref":"http_sd.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","-highlight","-livereload","prism"],"styles":{"pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css","website":"styles/website.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-solarizedlight.css"]},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css","website":"styles/website.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"prometheus 英文文档","language":"us-en","links":{"sidebar":{"Home":"https://docs.khs1994.com"}},"gitbook":"*"},"file":{"path":"installation.md","mtime":"2025-11-01T02:00:08.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2025-11-01T02:00:34.252Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

